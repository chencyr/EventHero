var EventHero=new function(){var d=this;d.handlers={};var f=function(){var a=this;a.isSet=!1;a.setValue=function(c){a.currentValue=c;a.isSet=!0};a.getValue=function(){return a.currentValue};a.reset=function(){delete a.currentValue;a.isSet=!1}};d.createEmitter=function(){var a=function(a,b){this.handlerParams=b||[];this.handler=a};a.prototype.emitReceived=function(){this.handler.emitReceivedParams(this.handlerParams,this)};a.prototype.createListener=function(){var a=this;return function(){a.onListenerReceived(a.handlerParams,
    arguments)&&a.emitReceived()}};a.prototype.onListenerReceived=function(a,b){return!0};return a};var e=d.createEmitter();e.prototype.onListenerReceived=function(a,c){for(var b in c)c[b]&&a[b].setValue(c[b]);return!0};var g=function(a,c){var b=this;b.params={};b.originHandler=a;(function(a){a=d.getParamNames(a);for(var c in a)b.params[a[c]]=new f(a[c])})(a);c=c||d.emitter("general");b.listen=function(){return(new c(b,arguments)).createListener()};b.getParams=function(){return b.params};b.applyOrigin=
    function(){var a=[],c=b.getParams(),d;for(d in c)a.push(c[d].getValue());b.originHandler.apply(b,a);b.onApplyOrigin(c)&&b.clearParams()};b.emitReceivedParams=function(a,c){b.onReceivedParams(b.getParams(),a,c)&&b.applyOrigin()};b.onReceivedParams=function(a,b,c){b=!0;for(var d in a)b=b&&a[d].isSet;return b};b.onApplyOrigin=function(a){return!0};b.clearParams=function(){var a=b.getParams(),c;for(c in a)a[c].reset()}};d.getParamNames=function(a){a=a.toString().replace(/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,
    "");a=a.slice(a.indexOf("(")+1,a.indexOf(")")).match(/([^\s,]+)/g);null===a&&(a=[]);return a};d.create=function(a,c){c=c||{};var b;c.emitter&&(b=d.emitter(c.emitter));b=new g(a,b);c.name&&(d.handlers[c.name]=b);c.onApplyOrigin&&(b.onApplyOrigin=c.onApplyOrigin);c.onReceivedParams&&(b.onReceivedParams=c.onReceivedParams);return b};d.emitter=function(a){return e}};"undefined"!=typeof module&&(module.exports=EventHero);